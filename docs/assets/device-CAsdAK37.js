(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function n(){return typeof navigator<"u"&&"gpu"in navigator}async function s(){if(!n())throw new Error("WebGPU is not supported in this browser. Use Chrome/Edge 113+ with WebGPU enabled.");const e=await navigator.gpu.requestAdapter({powerPreference:"high-performance"});if(!e)throw new Error("Failed to acquire a WebGPU adapter. Your GPU may not support WebGPU.");const t=e.info||{};console.log("WebGPU Adapter:",{vendor:t.vendor,architecture:t.architecture,device:t.device,description:t.description});const a=[];e.features&&e.features.has&&e.features.has("timestamp-query")&&a.push("timestamp-query");const r=await e.requestDevice({requiredFeatures:a,requiredLimits:{maxStorageBufferBindingSize:e.limits.maxStorageBufferBindingSize,maxBufferSize:e.limits.maxBufferSize,maxComputeWorkgroupsPerDimension:e.limits.maxComputeWorkgroupsPerDimension,maxComputeInvocationsPerWorkgroup:e.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:e.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:e.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:e.limits.maxComputeWorkgroupSizeZ}});return r.lost.then(o=>{console.error("WebGPU device lost:",o.message),o.reason!=="destroyed"&&console.error("Device loss reason:",o.reason)}),r.onuncapturederror=o=>{console.error("WebGPU uncaptured error:",o.error)},{adapter:e,device:r,features:r.features,limits:r.limits}}function c(i,e,t){return i.createShaderModule({label:t||"shader",code:e})}function f(i,e,t,a=!1){return i.createBuffer({label:t||"storage-buffer",size:e,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST,mappedAtCreation:a})}function p(i,e,t){return i.createBuffer({label:t,size:e,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})}function m(i,e,t){return i.createBuffer({label:t||"staging-buffer",size:e,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST})}function d(i,e,t,a=0){i.queue.writeBuffer(e,a,t)}async function l(i,e,t,a){const r=i.createCommandEncoder();r.copyBufferToBuffer(e,0,t,0,a),i.queue.submit([r.finish()]),await t.mapAsync(GPUMapMode.READ);const o=t.getMappedRange().slice(0);return t.unmap(),o}function g(i,e){return Math.ceil(i/e)*e}function P(i,e){return Math.ceil(i/e)}export{p as a,f as b,m as c,c as d,g as e,P as g,s as i,l as r,d as w};
